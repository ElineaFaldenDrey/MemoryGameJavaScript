<!doctype html>
<html>
	<head>
	<meta charset="UTF-8">
		<title>Games</title>
		<style>
				#game{
			width: 800px;
			height: 400px;
			border: 1px solid black;
			background: #607d8b; 
				}
				.square {
					width: 80px;
					height: 80px;
					margin: 10px;
					background-color: 	#20B2AA ;
					float: left;
					transition: 0.2s all; 
				}
		</style>
		<script>

/*
			// on luidit de lancer la function "function()" une fois le DOM loaded
			window.addEventListener("DOMContentLoaded", function(){

				// on lui dit que chaque element possédant la classe square sera lié à la variable squares
				var squares = document.getElementsByClassName("square");

				//on décrete que la derniere couleur de l'element selectionné n'est pas encore existante
				var lastColor = null;
				var lastTarget = null;
				let count = 0;

				for(var i = 0; i<squares.length; i++){

					// on boucle sur un event "click" 
					squares[i].addEventListener("click", function(event){

						// il va prendre l'attribut "data-color" de notre target sur lequel l'event a eut lieu et le mettre dans la variable color
						let color = event.target.getAttribute("data-color");
						let target = event.target;
						
						
						

						// si la dernière couleur est egale à la couleur dans data-color de l'element subissant l'event, on console.log(trouvé)
						console.log( target != lastTarget);
						if(lastColor == color && target != lastTarget){ // ATTENTION IL FONCTIONNE NE CLIQUANT SUR LUI MEME 
							console.log("trouvé")
							count++;
							console.log("count = " + count);
							event.target.style.backgroundColor = color;
							lastTarget.style.backgroundColor = color;

							lastTarget = null;

							if(count == (squares.length*0.5)){

								alert("Vous avez gagné !");
							}

						

							

							// sinon on assigne la couleur de l'element subissant l'event à last color pour pouvoir comparé cette dernière au suivant.
						} else {
							// attention il garde la derniere
							if(lastColor != null && lastTarget != null){
								//second click faux



								console.log("Verification LastColor = "+lastColor);
								
								console.log(lastTarget);

								lastTarget.style.backgroundColor = "#20B2AA";

								target.style.backgroundColor = "#20B2AA";

								lastColor = null;
								lastTarget = null;
								


							}
							else{
								//premier click

								lastColor = color;
								lastTarget = target;

								event.target.style.backgroundColor = color;
								console.log("Verification LastColor = "+lastColor);
								
								
							}


							//lastColor = color;
						}
						
					})
				}


			})*/

		</script>
	</head>
	<body>

		<div id="game">
			<div id="square-1" class="square" data-color="red"></div>
			<div id="square-2" class="square" data-color="red"></div>
			<div id="square-3" class="square" data-color="green"></div>
			<div id="square-4" class="square" data-color="green"></div>
			<div id="square-5" class="square" data-color="blue"></div>
			<div id="square-6" class="square" data-color="blue"></div>
			<div id="square-7" class="square" data-color="yellow"></div>
			<div id="square-8" class="square" data-color="yellow"></div>
			<div id="square-9" class="square" data-color="pink"></div>
			<div id="square-10" class="square" data-color="pink"></div>
			<div id="square-11" class="square" data-color="purple"></div>
			<div id="square-12" class="square" data-color="purple"></div>
			<div id="square-13" class="square" data-color="grey"></div>
			<div id="square-14" class="square" data-color="grey"></div>
			<div id="square-15" class="square" data-color="cyan"></div>
			<div id="square-16" class="square" data-color="cyan"></div>
		</div>
		
	</body>
</html>